<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Responsive meta tag -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>GIGA QUANT</title>
  <!-- Import Inter font from Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* Global box sizing */
    * {
      box-sizing: border-box;
    }
    /* Keyframes for fade-in animation */
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    /* Base Styles */
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      padding: 0;
      background-color: #030711;
      color: #ffffff;
    }
    .container {
      max-width: 1200px;
      margin: 40px auto;
      padding: 20px;
      animation: fadeIn 1s ease-in-out;
    }
    h1, h2, h3 {
      text-align: center;
    }
    h1 {
      margin-bottom: 30px;
      font-size: 2.8em;
    }
    h2 {
      margin: 20px 0 20px;
      font-size: 2em;
    }
    h3 {
      margin: 10px 0;
      font-size: 1.5em;
    }
    /* Divider styles */
    .divider {
      height: 1px;
      background-color: #1d283a;
      width: 100%;
      margin: 8px 0;
    }
    .section-divider {
      border: none;
      height: 2px;
      background-color: #1d283a;
      margin: 20px 0;
    }
    /* Card Base (used for many sections) */
    .card {
      background-color: #0d1120;
      border: 1px solid #1d283a;
      border-radius: 8px;
      padding: 15px;
      transition: background-color 0.3s ease, box-shadow 0.3s ease;
    }
    .card:hover {
      background-color: #131827;
      box-shadow: 0px 4px 10px rgba(0,0,0,0.5);
    }
    /* Ticker Logo Style */
    .ticker-logo {
      width: 24px;
      height: 24px;
      vertical-align: middle;
      margin-right: 5px;
    }
    /* Tooltip Styles */
    .tooltip {
      position: relative;
      display: inline-block;
      cursor: help;
      color: #ffffff;
      font-weight: bold;
      margin-left: 5px;
    }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 180px;
      background-color: #1d283a;
      color: #fff;
      text-align: center;
      border-radius: 4px;
      padding: 5px;
      position: absolute;
      z-index: 1;
      bottom: 125%;
      left: 50%;
      margin-left: -90px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 0.85em;
    }
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }
    /* Price Cards for Market Prices & Liquidity */
    .price-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .price-card {
      background-color: #0d1120;
      border: 1px solid #1d283a;
      border-radius: 8px;
      padding: 15px;
      width: 220px;
      text-align: center;
      transition: background-color 0.3s ease;
    }
    .price-card:hover {
      background-color: #131827;
    }
    .price-card p {
      margin: 8px 0;
      line-height: 1.4;
    }
    /* Section Headers for Market Overview */
    .market-header {
      text-align: center;
      margin: 20px 0 10px;
      font-size: 1.8em;
      border-bottom: 1px solid #1d283a;
      padding-bottom: 5px;
    }
    /* Upper Section Layout */
    .upper-section {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    .assets-column {
      flex: 1;
      min-width: 300px;
    }
    .deployment-column {
      flex: 1;
      min-width: 300px;
    }
    /* Lower Section: Core Assets (Price Movement) */
    .lp-calc-section {
      margin-top: 30px;
    }
    /* Price Movement Cards (square blocks) */
    .price-movement-cards {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .price-movement-card {
      background-color: #0d1120;
      border: 1px solid #1d283a;
      border-radius: 8px;
      width: 220px;
      height: 220px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      transition: background-color 0.3s ease;
      padding: 10px;
    }
    .price-movement-card:hover {
      background-color: #131827;
    }
    .price-movement-card p {
      margin: 5px 0;
    }
    /* Section Headers for Calculators */
    .section-header {
      text-align: center;
      margin-bottom: 20px;
      font-size: 1.8em;
      border-bottom: 1px solid #1d283a;
      padding-bottom: 10px;
    }
    /* Slider Container */
    .slider-container {
      background-color: #0d1120;
      border: 1px solid #1d283a;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
    }
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
    }
    .value-display {
      background-color: #0d1120;
      padding: 2px 6px;
      border-radius: 4px;
      font-weight: normal;
    }
    input[type="range"],
    input[type="number"] {
      width: 100%;
      padding: 10px;
      border: 1px solid #1d283a;
      border-radius: 4px;
      background-color: #030711;
      color: #ffffff;
      font-size: 1em;
      margin: 10px 0;
    }
    /* Output styling */
    .output {
      background-color: #0d1120;
      border: 1px solid #1d283a;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      text-align: center;
      transition: background-color 0.3s ease;
    }
    .output:hover {
      background-color: #131827;
    }
    /* Responsive behavior for desktop (default) is maintained */
    
    /* Mobile-Specific Overrides */
    @media (max-width: 768px) {
      /* Upper section becomes a single column */
      .upper-section {
        flex-direction: column;
      }
      /* Assets and Deployment cards become full width */
      .assets-column, .deployment-column {
        width: 100%;
      }
      /* Adjust Price Cards to fill more width on mobile */
      .price-card {
        width: 90%;
        margin: 0 auto;
      }
      /* For price movement (square) blocks, set width to 90% and adjust height automatically */
      .price-movement-card {
        width: 90%;
        height: auto;
        padding: 15px;
      }
      /* Increase font sizes slightly for easier mobile reading */
      h1 {
        font-size: 2.4em;
      }
      h2 {
        font-size: 1.8em;
      }
      h3 {
        font-size: 1.3em;
      }
      /* Reduce gaps for a more compact mobile layout */
      .price-cards, .price-movement-cards, .upper-section {
        gap: 10px;
      }
      /* Slider and output containers adjustments */
      .slider-container, .output, .card {
        padding: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>GIGA QUANT</h1>
    
    <!-- Upper Section: Assets (Base Value) and Deployment Calculator -->
    <div class="upper-section">
      <!-- Assets Column (Base Value) -->
      <div class="assets-column">
        <h2>Market Overview</h2>
        <!-- Base Value Section -->
        <h3 class="market-header">Base Value</h3>
        <div class="price-cards">
          <!-- Ethereum Card (Using Fetched ETH Data) -->
          <div class="price-card card">
            <p>
              <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8ee510e939dfa15c662f7_3287b3-ethereum-eth.svg" alt="ETH Logo" class="ticker-logo" />
              ETHEREUM
            </p>
            <div class="divider"></div>
            <p>Price: $<span id="ethMarketPrice">Loading...</span></p>
            <p>Liquidity: $<span id="ethLiquidity">Loading...</span></p>
          </div>
          <!-- SAC WALLET Card (Calculated from Fetched ETH Data) -->
          <div class="price-card card">
            <p>
              <img src="https://gopulse.com/img/coins/MOST.svg" alt="SAC Wallet Logo" class="ticker-logo" />
              SAC WALLET
            </p>
            <div class="divider"></div>
            <p>Holdings: 171,000 ETH</p>
            <p>Value: $<span id="sacWalletValue">Loading...</span></p>
          </div>
        </div>
        <!-- Divider Between Base Value and Core Assets -->
        <hr class="section-divider" />
        <!-- Core Assets (Tokens) Section -->
        <h3 class="market-header">Core Assets</h3>
        <div class="price-cards">
          <!-- PLS Card -->
          <div class="price-card card">
            <p>
              <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8edd1e9aa195320a330b7_pulselogo%20trimmed.png" alt="PLS Logo" class="ticker-logo" />
              <strong>PLS</strong>
            </p>
            <div class="divider"></div>
            <p>Price: $<span id="plsMarketPrice">Loading...</span></p>
            <p>Liquidity: $<span id="plsLiquidity">Loading...</span></p>
          </div>
          <!-- PLSX Card -->
          <div class="price-card card">
            <p>
              <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8ee1d2d83a860ecc432c0_PulseX_X.svg" alt="PLSX Logo" class="ticker-logo" />
              <strong>PLSX</strong>
            </p>
            <div class="divider"></div>
            <p>Price: $<span id="plsxMarketPrice">Loading...</span></p>
            <p>Liquidity: $<span id="plsxLiquidity">Loading...</span></p>
          </div>
          <!-- HEX Card -->
          <div class="price-card card">
            <p>
              <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8ee842d83a860ecc48477_HEXagon.svg" alt="HEX Logo" class="ticker-logo" />
              <strong>HEX</strong>
            </p>
            <div class="divider"></div>
            <p>Price: $<span id="hexMarketPrice">Loading...</span></p>
            <p>Liquidity: $<span id="hexLiquidity">Loading...</span></p>
          </div>
          <!-- INC Card -->
          <div class="price-card card">
            <p>
              <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8edbc6c0cce17d1a68ce1_INC%20PNG%20VECT-p-1600.png" alt="INC Logo" class="ticker-logo" />
              <strong>INC</strong>
            </p>
            <div class="divider"></div>
            <p>Price: $<span id="incMarketPrice">Loading...</span></p>
            <p>Liquidity: $<span id="incLiquidity">Loading...</span></p>
          </div>
        </div>
      </div>
      
      <!-- Deployment Calculator Column -->
      <div class="deployment-column">
        <div class="card">
          <div class="section-header">Deployment Calculator</div>
          <!-- ETH Price Slider (Used for Deployment Calculations Only) -->
          <div class="slider-container">
            <label for="ethPrice">
              <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8ee510e939dfa15c662f7_3287b3-ethereum-eth.svg" alt="ETH Logo" class="ticker-logo" />
              ETH Price ($):
              <span id="ethPriceDisplay" class="value-display">4000</span>
              <span class="tooltip">?
                <span class="tooltiptext">Adjust the ETH price used for deployment calculations.</span>
              </span>
            </label>
            <input type="range" id="ethPrice" min="2000" max="8000" step="50" value="4000" oninput="calculateDeployment()" />
          </div>
          <!-- On-Chain ETH Deploy Percentage Slider -->
          <div class="slider-container">
            <label for="onChainEthPercent">
              On-Chain ETH (4,731 ETH) Deploy (%):
              <span id="onChainEthPercentDisplay" class="value-display">100</span>%
              <span class="tooltip">?
                <span class="tooltiptext">Percentage of on-chain ETH used.</span>
              </span>
            </label>
            <input type="range" id="onChainEthPercent" min="0" max="100" step="1" value="100" oninput="calculateDeployment()" />
          </div>
          <!-- Richard's Sac Bag Deploy Percentage Slider -->
          <div class="slider-container">
            <label for="richardSacPercent">
              Richard's Sac Bag (171,000 ETH) Deploy (%):
              <span id="richardSacPercentDisplay" class="value-display">100</span>%
              <span class="tooltip">?
                <span class="tooltiptext">Percentage of ETH from the Sac Wallet used.</span>
              </span>
            </label>
            <input type="range" id="richardSacPercent" min="0" max="100" step="1" value="100" oninput="calculateDeployment()" />
          </div>
          <!-- Stables On-Chain Deployed Percentage Slider -->
          <div class="slider-container">
            <label for="stablesPercent">
              Stables On-Chain Deployed (21.5M $) (%):
              <span id="stablesPercentDisplay" class="value-display">100</span>%
              <span class="tooltip">?
                <span class="tooltiptext">Percentage of stable capital deployed.</span>
              </span>
            </label>
            <input type="range" id="stablesPercent" min="0" max="100" step="1" value="100" oninput="calculateDeployment()" />
          </div>
          <!-- Total Capital Deployed Output -->
          <div class="output">
            <strong>Total Capital Deployed into PLS: $<span id="totalDeployment">0</span></strong>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Lower Section: Core Assets - Price Movement (Square Blocks) -->
    <div class="lp-calc-section">
      <div class="card">
        <div class="section-header">Core Assets - Price Movement</div>
        <div class="price-movement-cards">
          <!-- PLS Block -->
          <div class="price-movement-card">
            <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8edd1e9aa195320a330b7_pulselogo%20trimmed.png" alt="PLS Logo" class="ticker-logo" />
            <p><strong>PLS</strong></p>
            <div class="divider"></div>
            <p>Price: $<span id="plsNewPrice">0</span></p>
            <p>% Increase: <span id="plsMove">0</span></p>
            <p>Multiplier: <span id="plsMultiplier">0x</span></p>
          </div>
          <!-- PLSX Block -->
          <div class="price-movement-card">
            <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8ee1d2d83a860ecc432c0_PulseX_X.svg" alt="PLSX Logo" class="ticker-logo" />
            <p><strong>PLSX</strong></p>
            <div class="divider"></div>
            <p>Price: $<span id="plsxNewPrice">0</span></p>
            <p>% Increase: <span id="plsxMove">0</span></p>
            <p>Multiplier: <span id="plsxMultiplier">0x</span></p>
          </div>
          <!-- HEX Block -->
          <div class="price-movement-card">
            <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8ee842d83a860ecc48477_HEXagon.svg" alt="HEX Logo" class="ticker-logo" />
            <p><strong>HEX</strong></p>
            <div class="divider"></div>
            <p>Price: $<span id="hexNewPrice">0</span></p>
            <p>% Increase: <span id="hexMove">0</span></p>
            <p>Multiplier: <span id="hexMultiplier">0x</span></p>
          </div>
          <!-- INC Block -->
          <div class="price-movement-card">
            <img src="https://cdn.prod.website-files.com/67a0cb20a913364adf0401a8/67a8edbc6c0cce17d1a68ce1_INC%20PNG%20VECT-p-1600.png" alt="INC Logo" class="ticker-logo" />
            <p><strong>INC</strong></p>
            <div class="divider"></div>
            <p>Price: $<span id="incNewPrice">0</span></p>
            <p>% Increase: <span id="incMove">0</span></p>
            <p>Multiplier: <span id="incMultiplier">0x</span></p>
          </div>
        </div>
      </div>
    </div>
    
  </div>

  <script>
    // Global variable to hold the capital deployment value
    let globalTotalCapital = 0;
    
    // Global variables to store the fetched market prices for tokens
    let marketPriceETH = 0,
        marketPricePLS = 0,
        marketPricePLSX = 0,
        marketPriceHEX = 0,
        marketPriceINC = 0;
    
    // Define constants for liquidity values (in dollars)
    const liquidityPLS = 18546332.36; // PLS liquidity (derived from stables)
    const liquidityETH = 5000000000;  // ETH liquidity for Ethereum card
    
    // Deployment Calculator Function
    function calculateDeployment() {
      // Retrieve slider values (only used for deployment calculations)
      var ethSliderPrice = parseFloat(document.getElementById('ethPrice').value);
      var onChainPercent = parseFloat(document.getElementById('onChainEthPercent').value);
      var richardPercent = parseFloat(document.getElementById('richardSacPercent').value);
      var stablesPercent = parseFloat(document.getElementById('stablesPercent').value);
      
      // Update displayed slider values for deployment calculator
      document.getElementById('ethPriceDisplay').innerText = ethSliderPrice;
      document.getElementById('onChainEthPercentDisplay').innerText = onChainPercent;
      document.getElementById('richardSacPercentDisplay').innerText = richardPercent;
      document.getElementById('stablesPercentDisplay').innerText = stablesPercent;
      
      // For deployment calculations, use the slider ETH price
      var totalOnChainEth = 4731;     // Total on-chain ETH available
      var totalRichardEth = 171000;   // Total ETH in Richard's Sac Bag (for deployment)
      var totalStables = 21.5;        // Total stables in millions of dollars
      
      // Calculate deployed amounts (in dollar value)
      var deployedOnChainEth = totalOnChainEth * (onChainPercent / 100);
      var deployedRichardEth = totalRichardEth * (richardPercent / 100);
      var deployedStablesDollars = totalStables * (stablesPercent / 100) * 1e6;
      
      // Compute total capital deployed (in dollars) using the slider ETH price
      var totalCapital = deployedOnChainEth * ethSliderPrice + deployedRichardEth * ethSliderPrice + deployedStablesDollars;
      
      document.getElementById('totalDeployment').innerText =
        totalCapital.toLocaleString(undefined, { maximumFractionDigits: 2 });
      
      globalTotalCapital = totalCapital;
      
      // Recalculate the price movement with the new capital deployment value
      calculatePriceMovement();
    }
    
    // Liquidity Pool Price Movement Calculator Function using flat returns
    function calculatePriceMovement() {
      // Compute the pump factor f for PLS from capital injection:
      // f = 1 + (capital injected / liquidity of PLS pool)
      var f = 1 + (globalTotalCapital / liquidityPLS);
      
      // Flat multipliers:
      // PLS multiplier is f.
      // PLSX multiplier is 2 * f.
      // HEX and INC multipliers are 4 * f.
      var multiplierPLS = f;
      var multiplierPLSX = 2 * f;
      var multiplierHEX = 4 * f;
      var multiplierINC = 4 * f;
      
      // Compute percentage changes for display
      var plsPercent = (multiplierPLS - 1) * 100;
      var plsxPercent = (multiplierPLSX - 1) * 100;
      var hexPercent = (multiplierHEX - 1) * 100;
      var incPercent = (multiplierINC - 1) * 100;
      
      // Update displays for price movement as percentages (with one "%" appended)
      document.getElementById('plsMove').innerText = plsPercent.toFixed(2) + "%";
      document.getElementById('plsxMove').innerText = plsxPercent.toFixed(2) + "%";
      document.getElementById('hexMove').innerText = hexPercent.toFixed(2) + "%";
      document.getElementById('incMove').innerText = incPercent.toFixed(2) + "%";
      
      // Also update multiplier displays
      document.getElementById('plsMultiplier').innerText = multiplierPLS.toFixed(2) + "x";
      document.getElementById('plsxMultiplier').innerText = multiplierPLSX.toFixed(2) + "x";
      document.getElementById('hexMultiplier').innerText = multiplierHEX.toFixed(2) + "x";
      document.getElementById('incMultiplier').innerText = multiplierINC.toFixed(2) + "x";
      
      // Compute new prices using the fetched market prices as base values
      var newPlsPrice = marketPricePLS * multiplierPLS;
      var newPlsxPrice = marketPricePLSX * multiplierPLSX;
      var newHexPrice = marketPriceHEX * multiplierHEX;
      var newIncPrice = marketPriceINC * multiplierINC;
      
      // Update the output displays (formatted)
      document.getElementById('plsNewPrice').innerText = newPlsPrice.toFixed(6);
      document.getElementById('plsxNewPrice').innerText = newPlsxPrice.toFixed(6);
      document.getElementById('hexNewPrice').innerText = newHexPrice.toFixed(6);
      document.getElementById('incNewPrice').innerText = newIncPrice.toFixed(6);
    }
    
    // Function to fetch real-time token prices and liquidity from Dexscreener
    function fetchDexscreenerPrices() {
      const tokens = {
        ETH: "0x02dcdd04e3f455d838cd1249292c58f3b79e3c3c", // New ETH contract address
        PLS: "0xA1077a294dDE1B09bB078844df40758a5D0f9a27",
        PLSX: "0x95B303987A60C71504D99Aa1b13B4DA07b0790ab",
        HEX: "0x2b591e99afE9f32eAA6214f7B7629768c40Eeb39",
        INC: "0x2fa878Ab3F87CC1C9737Fc071108F904c0B0C95d"
      };
      
      Object.keys(tokens).forEach(token => {
        const url = `https://api.dexscreener.com/latest/dex/tokens/${tokens[token]}`;
        fetch(url)
          .then(res => res.json())
          .then(data => {
            if (data?.pairs && data.pairs.length > 0) {
              const pairData = data.pairs[0];
              const price = pairData.priceUsd || "0";
              const priceFloat = parseFloat(price);
              
              if (token === "ETH") {
                marketPriceETH = priceFloat;
                document.getElementById('ethMarketPrice').innerText = marketPriceETH.toFixed(2);
                const liquidityUsd = pairData.liquidity && pairData.liquidity.usd 
                  ? parseFloat(pairData.liquidity.usd)
                  : 0;
                document.getElementById('ethLiquidity').innerText = liquidityUsd
                  ? liquidityUsd.toLocaleString(undefined, { maximumFractionDigits: 2 })
                  : "N/A";
                var sacWalletValue = marketPriceETH * 171000;
                document.getElementById('sacWalletValue').innerText = sacWalletValue.toLocaleString(undefined, { maximumFractionDigits: 2 });
              } else {
                document.getElementById(`${token.toLowerCase()}MarketPrice`).innerText = priceFloat.toFixed(6);
                if (token === "PLS") {
                  marketPricePLS = priceFloat;
                } else if (token === "PLSX") {
                  marketPricePLSX = priceFloat;
                } else if (token === "HEX") {
                  marketPriceHEX = priceFloat;
                } else if (token === "INC") {
                  marketPriceINC = priceFloat;
                }
                const liquidityUsd = pairData.liquidity && pairData.liquidity.usd 
                  ? parseFloat(pairData.liquidity.usd)
                  : 0;
                document.getElementById(`${token.toLowerCase()}Liquidity`).innerText = liquidityUsd
                  ? liquidityUsd.toLocaleString(undefined, { maximumFractionDigits: 2 })
                  : "N/A";
              }
              calculatePriceMovement();
            }
          })
          .catch(error => {
            console.error(`Error fetching data for ${token}:`, error);
            if(document.getElementById(`${token.toLowerCase()}MarketPrice`)) {
              document.getElementById(`${token.toLowerCase()}MarketPrice`).innerText = "Error";
              document.getElementById(`${token.toLowerCase()}Liquidity`).innerText = "Error";
            }
          });
      });
    }
    
    // Initialize calculators and fetch prices on page load
    calculateDeployment();
    calculatePriceMovement();
    fetchDexscreenerPrices();
    
    // Optionally, refresh prices periodically (e.g., every minute)
    // setInterval(fetchDexscreenerPrices, 60000);
  </script>
</body>
</html>
